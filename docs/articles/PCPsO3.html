<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drawing additional parallel coordinate plots to support O3 plots â€¢ OutliersO3</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Drawing additional parallel coordinate plots to support O3 plots">
<meta property="og:description" content="OutliersO3">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OutliersO3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/DrawingO3plots.html">Drawing O3 (Overview Of Outliers) plots</a>
    </li>
    <li>
      <a href="../articles/MultTolLevels.html">Different outlier tolerance levels for different O3 plots</a>
    </li>
    <li>
      <a href="../articles/PCPsO3.html">Drawing additional parallel coordinate plots to support O3 plots</a>
    </li>
    <li>
      <a href="../articles/xtraO3methods.html">Including results from other outlier identification methods in O3 plots</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Drawing additional parallel coordinate plots to support O3 plots</h1>
                        <h4 class="author">Antony Unwin</h4>
            
            <h4 class="date">2020-05-18</h4>
      
      
      <div class="hidden name"><code>PCPsO3.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Two parallel coordinate plots are drawn by the <em>OutliersO3</em> package to complement the main O3 plot, one of the dataset with all outliers highlighted and one of outlier distances with either all outliers highlighted (<code>O3plotM</code>) or the outliers found for the strictest tolerance level highlighted (<code>O3plotT</code>). This vignette shows you how to draw these parallel coordinate plots with different sets of cases highlighted.</p>
</div>
<div id="setting-up-variables-for-alternative-highlighting" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-up-variables-for-alternative-highlighting" class="anchor"></a>Setting up variables for alternative highlighting</h2>
<p>Consider again the Election2005 dataset used in the other vignettes and create a new binary variable defining the cases you are interested in. The first example selects the outliers identified for the complete dataset and then uses the code from the <code>O3plotM</code> function for drawing a pcp of the data.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># Prepare O3plot results</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">OutliersO3</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">Election2005</span>)
<span class="no">data</span> <span class="kw">&lt;-</span> <span class="no">Election2005</span>[, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">6</span>, <span class="fl">10</span>, <span class="fl">17</span>, <span class="fl">28</span>)]
<span class="no">O3p</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/O3prep.html">O3prep</a></span>(<span class="no">data</span>, <span class="kw">method</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"HDo"</span>, <span class="st">"PCS"</span>, <span class="st">"BAC"</span>, <span class="st">"adjOut"</span>, <span class="st">"DDC"</span>, <span class="st">"MCD"</span>))
<span class="no">O3p1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/O3plotM.html">O3plotM</a></span>(<span class="no">O3p</span>)

<span class="co">#Create and add the new highlighting variable to the dataset</span>
<span class="no">ty</span> <span class="kw">&lt;-</span> <span class="no">O3p1</span>$<span class="no">outsTable</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="no">Combination</span><span class="kw">==</span><span class="st">"c1111"</span>)
<span class="no">ouFx</span> <span class="kw">&lt;-</span> <span class="no">data</span>
<span class="no">ouFx</span>$<span class="no">oh</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">data</span>))
<span class="no">ouFx</span>[<span class="no">ty</span>$<span class="no">Case</span>,<span class="st">"oh"</span>] <span class="kw">&lt;-</span> <span class="st">"A"</span>

<span class="co">#Use plotting code from O3plotM</span>
<span class="no">n1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(<span class="no">data</span>)
<span class="no">ouFx</span> <span class="kw">&lt;-</span> <span class="no">ouFx</span> <span class="kw">%&gt;%</span> <span class="fu">mutate</span>(<span class="kw">alev</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">oh</span> <span class="kw">==</span> <span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>))
<span class="no">gp</span> <span class="kw">&lt;-</span> <span class="fu">ggparcoord</span>(<span class="no">ouFx</span> <span class="kw">%&gt;%</span> <span class="fu">arrange</span>(<span class="no">oh</span>), <span class="kw">scale</span> <span class="kw">=</span> <span class="st">"uniminmax"</span>, <span class="kw">columns</span><span class="kw">=</span><span class="fl">1</span>:<span class="no">n1</span>,
<span class="kw">groupColumn</span><span class="kw">=</span><span class="st">"oh"</span>, <span class="kw">alphaLines</span><span class="kw">=</span><span class="st">"alev"</span>) + <span class="fu">labs</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="kw">NULL</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="kw">NULL</span>) +
<span class="fu">scale_colour_manual</span>(<span class="kw">values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"grey70"</span>, <span class="st">"red"</span>)) +
<span class="fu">theme</span>(<span class="kw">plot.title</span> <span class="kw">=</span> <span class="fu">element_text</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">18</span>, <span class="kw">hjust</span> <span class="kw">=</span> <span class="fl">0.5</span>),
<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"none"</span>, <span class="kw">axis.ticks.y</span> <span class="kw">=</span> <span class="fu">element_blank</span>(),
<span class="kw">axis.text.y</span> <span class="kw">=</span> <span class="fu">element_blank</span>())
<span class="no">gp</span></pre></body></html></div>
<p><img src="PCPsO3_files/figure-html/unnamed-chunk-2-1.png" width="576" style="display: block; margin: auto;"> Fig 1: A parallel coordinate plot of the four variables from the Election2005 dataset with the outliers highlighted that are identified for the whole dataset by at least one of the six methods. All nine outliers have a small area (Flaeche) and a high population density (BDichte).</p>
<p>The second example uses the same highlighting variable, but for highlighting the outlier distances pcp. Again the plotting code is taken from O3plotM.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">mm</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"HDo"</span>, <span class="st">"PCS"</span>, <span class="st">"BAC"</span>, <span class="st">"adjOut"</span>, <span class="st">"DDC"</span>, <span class="st">"MCD"</span>)
<span class="co">#Create the dataset of distances and add the new highlighting variable from the first example</span>
<span class="no">Cx</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="no">O3p1</span>$<span class="no">Cs</span>[ , <span class="st">"c1111"</span>, ])
<span class="no">Cx</span>$<span class="no">oh</span> <span class="kw">&lt;-</span> <span class="no">ouFx</span>$<span class="no">oh</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">Cx</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">mm</span>, <span class="st">"oh"</span>)
<span class="co">#Use plotting code from O3plotM</span>
<span class="kw">if</span>(<span class="st">"HDo"</span> <span class="kw">%in%</span> <span class="no">mm</span>) {
<span class="no">Cx</span> <span class="kw">&lt;-</span> <span class="no">Cx</span> <span class="kw">%&gt;%</span> <span class="fu">select</span>(-<span class="no">HDo</span>) <span class="co">#HDo provides no distances</span>
}
<span class="no">mx</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">mm</span>)-<span class="fl">1</span>*(<span class="st">"HDo"</span> <span class="kw">%in%</span> <span class="no">mm</span>)
<span class="no">gc</span> <span class="kw">&lt;-</span> <span class="fu">ggparcoord</span>(<span class="no">Cx</span> <span class="kw">%&gt;%</span> <span class="fu">arrange</span>(<span class="no">oh</span>), <span class="kw">scale</span> <span class="kw">=</span> <span class="st">"uniminmax"</span>, <span class="kw">columns</span><span class="kw">=</span><span class="fl">1</span>:<span class="no">mx</span>,
<span class="kw">groupColumn</span><span class="kw">=</span><span class="st">"oh"</span>) + <span class="fu">labs</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="kw">NULL</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="kw">NULL</span>) +
<span class="fu">scale_colour_manual</span>(<span class="kw">values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"grey70"</span>, <span class="st">"red"</span>)) +
<span class="fu">theme</span>(<span class="kw">plot.title</span> <span class="kw">=</span> <span class="fu">element_text</span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">18</span>, <span class="kw">hjust</span> <span class="kw">=</span> <span class="fl">0.5</span>),
<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"none"</span>, <span class="kw">axis.ticks.y</span> <span class="kw">=</span> <span class="fu">element_blank</span>(),
<span class="kw">axis.text.y</span> <span class="kw">=</span> <span class="fu">element_blank</span>())
<span class="no">gMethods</span> <span class="kw">&lt;-</span> <span class="no">gc</span>  + <span class="fu">ggtitle</span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Distances for each method with outliers highlighted"</span>))
<span class="no">gc</span></pre></body></html></div>
<p><img src="PCPsO3_files/figure-html/unnamed-chunk-3-1.png" width="576" style="display: block; margin: auto;"> Fig 2: A parallel coordinate plot of the outlier scores reported by the different methods (excluding <code>HDoutliers</code>, which does not calculate scores). Cases identified as outliers for the full dataset are highlighted. <code>PCS</code> and <code>BAC</code> give similar results.</p>
<p>Other highlighting variables might include highlighting for other combinations or highlighting for particular methods. Or you might want to explore the data with other graphical tools.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Antony Unwin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
